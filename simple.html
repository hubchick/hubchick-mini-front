<!DOCTYPE html>
<html>
<head>
    <title>Hubchik App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
            text-align: center; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            margin: 0;
        }
        .container {
            max-width: 400px;
            margin: 50px auto;
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        .status {
            background: rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Hubchik Mini App</h1>
        <div class="status" id="status">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        <div class="status" id="telegram">Telegram: –ø—Ä–æ–≤–µ—Ä–∫–∞...</div>
        <div class="status" id="user">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: –ø—Ä–æ–≤–µ—Ä–∫–∞...</div>
        <button onclick="testAPI()" style="background: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer;">–¢–µ—Å—Ç API</button>
        <div id="api-result"></div>
    </div>

    <script>
        // Initialize Telegram WebApp
        if (window.Telegram && window.Telegram.WebApp) {
            window.Telegram.WebApp.ready();
            window.Telegram.WebApp.expand();
            
            document.getElementById('telegram').innerHTML = '‚úÖ Telegram WebApp –≥–æ—Ç–æ–≤';
            
            const user = window.Telegram.WebApp.initDataUnsafe.user;
            if (user) {
                document.getElementById('user').innerHTML = `‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${user.first_name} ${user.last_name || ''}`;
            } else {
                document.getElementById('user').innerHTML = '‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è';
            }
        } else {
            document.getElementById('telegram').innerHTML = '‚ùå Telegram WebApp –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω';
        }
        
        document.getElementById('status').innerHTML = '‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ';
        
        function testAPI() {
            const result = document.getElementById('api-result');
            result.innerHTML = '–ü—Ä–æ–≤–µ—Ä–∫–∞ API...';
            
            fetch('/api/health')
                .then(response => response.json())
                .then(data => {
                    result.innerHTML = `‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç: ${JSON.stringify(data)}`;
                })
                .catch(error => {
                    result.innerHTML = `‚ùå –û—à–∏–±–∫–∞ API: ${error.message}`;
                });
        }
    </script>
</body>
</html>
